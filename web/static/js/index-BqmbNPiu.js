var F=(Y,d,i)=>new Promise((a,m)=>{var c=n=>{try{v(i.next(n))}catch(o){m(o)}},y=n=>{try{v(i.throw(n))}catch(o){m(o)}},v=n=>n.done?a(n.value):Promise.resolve(n.value).then(c,y);v((i=i.apply(Y,d)).next())});import{a as z}from"./statistics-qCEjxc4p.js";import{v as A,h,r as E,i as I,c as R,o as D,J as e,I as T,V as B,H as U,S as l,b as s,G as r,T as x,aa as j,R as _,ay as q,_ as G}from"./index-Dg8x8o01.js";const H={class:"welcome"},J={class:"flex flex-wrap items-center gap-4"},P={class:"flex items-center gap-2"},Q={class:"flex items-center gap-2"},W={class:"flex items-center justify-between"},$={class:"mb-6"},K={class:"text-center"},L={class:"text-2xl font-semibold",style:{color:"#67c23a"}},O={class:"mb-6"},X={class:"text-center"},Z={class:"text-2xl font-semibold",style:{color:"#e6a23c"}},tt={class:"mb-4"},et={class:"text-4xl font-semibold",style:{color:"#67c23a"}},st={class:"mb-4"},lt={class:"text-4xl font-semibold",style:{color:"#409eff"}},at=A({name:"Welcome",__name:"index",setup(Y){const d=h({date_from:"",date_to:""}),i=E(!1),a=E(null),m=[{text:"最近7天",value:()=>{const o=new Date,t=new Date;return t.setDate(t.getDate()-7),[t,o]}},{text:"最近30天",value:()=>{const o=new Date,t=new Date;return t.setDate(t.getDate()-30),[t,o]}},{text:"最近3个月",value:()=>{const o=new Date,t=new Date;return t.setMonth(t.getMonth()-3),[t,o]}}],c=()=>F(null,null,function*(){i.value=!0;try{const o=yield z(d);o.success&&(a.value=o.data)}catch(o){q.error("加载统计数据失败")}finally{i.value=!1}}),y=()=>{c()},v=()=>{d.date_from="",d.date_to="",c()},n=o=>`${(o*100).toFixed(2)}%`;return I(()=>{c()}),(o,t)=>{const p=r("el-card"),M=r("el-date-picker"),V=r("el-button"),g=r("el-text"),b=r("el-divider"),f=r("el-statistic"),u=r("el-col"),w=r("el-row"),C=r("el-progress"),N=r("el-empty"),S=j("loading");return D(),R("div",H,[e(p,{class:"mb-4"},{default:l(()=>t[2]||(t[2]=[s("div",{class:"text-center"},[s("h1",{class:"text-3xl font-bold text-gray-800 mb-2"}," 欢迎使用 链接重要性评估系统 "),s("p",{class:"text-gray-500"},"网页链接爬虫系统")],-1)])),_:1,__:[2]}),e(p,{class:"mb-4"},{default:l(()=>[s("div",J,[s("div",P,[t[3]||(t[3]=s("span",{class:"text-sm whitespace-nowrap"},"日期范围",-1)),e(M,{modelValue:d.date_from,"onUpdate:modelValue":t[0]||(t[0]=k=>d.date_from=k),type:"date",placeholder:"开始日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",shortcuts:m,style:{width:"150px"}},null,8,["modelValue"]),t[4]||(t[4]=s("span",{class:"text-sm text-gray-500"},"至",-1)),e(M,{modelValue:d.date_to,"onUpdate:modelValue":t[1]||(t[1]=k=>d.date_to=k),type:"date",placeholder:"结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",shortcuts:m,style:{width:"150px"}},null,8,["modelValue"])]),s("div",Q,[e(V,{type:"primary",onClick:y},{default:l(()=>t[5]||(t[5]=[x("查询",-1)])),_:1,__:[5]}),e(V,{onClick:v},{default:l(()=>t[6]||(t[6]=[x("重置",-1)])),_:1,__:[6]})])])]),_:1}),a.value?T((D(),B(p,{key:0},{header:l(()=>[s("div",W,[t[7]||(t[7]=s("span",{class:"text-base font-semibold"},"所有网站统计概览",-1)),e(g,{type:"info",size:"small"},{default:l(()=>[x(" 统计周期: "+_(a.value.period.from||"全部")+" ~ "+_(a.value.period.to||"全部"),1)]),_:1})])]),default:l(()=>[s("div",$,[e(b,{"content-position":"left"},{default:l(()=>t[8]||(t[8]=[s("span",{class:"text-base font-semibold"},"任务统计",-1)])),_:1,__:[8]}),e(w,{gutter:20},{default:l(()=>[e(u,{span:6},{default:l(()=>[e(f,{title:"总任务数",value:a.value.summary.total_tasks,"value-style":"color: #409EFF"},null,8,["value"])]),_:1}),e(u,{span:6},{default:l(()=>[e(f,{title:"已完成任务",value:a.value.summary.completed_tasks,"value-style":"color: #67C23A"},null,8,["value"])]),_:1}),e(u,{span:6},{default:l(()=>[e(f,{title:"失败任务",value:a.value.summary.failed_tasks,"value-style":"color: #F56C6C"},null,8,["value"])]),_:1}),e(u,{span:6},{default:l(()=>[s("div",K,[t[9]||(t[9]=s("div",{class:"text-gray-500 text-sm mb-2"},"任务成功率",-1)),s("div",L,_(a.value.summary.total_tasks>0?n(a.value.summary.completed_tasks/a.value.summary.total_tasks):"0%"),1)])]),_:1})]),_:1})]),s("div",O,[e(b,{"content-position":"left"},{default:l(()=>t[10]||(t[10]=[s("span",{class:"text-base font-semibold"},"链接统计",-1)])),_:1,__:[10]}),e(w,{gutter:20},{default:l(()=>[e(u,{span:8},{default:l(()=>[e(f,{title:"总爬取链接数",value:a.value.summary.total_links_crawled,"value-style":"color: #409EFF"},null,8,["value"])]),_:1}),e(u,{span:8},{default:l(()=>[e(f,{title:"新增链接数",value:a.value.summary.new_links_found,"value-style":"color: #E6A23C"},null,8,["value"])]),_:1}),e(u,{span:8},{default:l(()=>[s("div",X,[t[11]||(t[11]=s("div",{class:"text-gray-500 text-sm mb-2"},"平均新增率",-1)),s("div",Z,_(a.value.summary.total_links_crawled>0?n(a.value.summary.new_links_found/a.value.summary.total_links_crawled):"0%"),1)])]),_:1})]),_:1})]),s("div",null,[e(b,{"content-position":"left"},{default:l(()=>t[12]||(t[12]=[s("span",{class:"text-base font-semibold"},"质量统计",-1)])),_:1,__:[12]}),e(w,{gutter:20},{default:l(()=>[e(u,{span:12},{default:l(()=>[e(p,{shadow:"never",class:"text-center"},{default:l(()=>[s("div",tt,[t[13]||(t[13]=s("div",{class:"text-gray-500 text-sm mb-2"},"重要链接占比",-1)),s("div",et,_(n(a.value.summary.avg_valid_rate)),1)]),e(C,{percentage:a.value.summary.avg_valid_rate*100,"stroke-width":20,class:"mt-4"},null,8,["percentage"]),e(g,{type:"info",size:"small",class:"mt-2"},{default:l(()=>t[14]||(t[14]=[x(" 重要链接占总连接的比例 ",-1)])),_:1,__:[14]})]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(p,{shadow:"never",class:"text-center"},{default:l(()=>[s("div",st,[t[15]||(t[15]=s("div",{class:"text-gray-500 text-sm mb-2"},"平均精准率",-1)),s("div",lt,_(n(a.value.summary.avg_precision_rate)),1)]),e(C,{percentage:a.value.summary.avg_precision_rate*100,"stroke-width":20,color:"#409EFF",class:"mt-4"},null,8,["percentage"]),e(g,{type:"info",size:"small",class:"mt-2"},{default:l(()=>t[16]||(t[16]=[x(" 重要链接识别准确率 ",-1)])),_:1,__:[16]})]),_:1})]),_:1})]),_:1})])]),_:1})),[[S,i.value]]):i.value?U("",!0):(D(),B(N,{key:1,description:"暂无统计数据"}))])}}}),dt=G(at,[["__scopeId","data-v-77c32e12"]]);export{dt as default};
