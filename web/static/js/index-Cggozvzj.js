var E=(M,d,i)=>new Promise((l,c)=>{var v=n=>{try{p(i.next(n))}catch(m){c(m)}},g=n=>{try{p(i.throw(n))}catch(m){c(m)}},p=n=>n.done?l(n.value):Promise.resolve(n.value).then(v,g);p((i=i.apply(M,d)).next())});import{a as A}from"./statistics-CC4MdyNV.js";import{v as P,h,r as B,i as I,c as R,o as Y,J as e,I as T,V as N,H as U,S as a,b as s,G as r,T as y,aa as $,R as _,ay as j,_ as q}from"./index-Bvwcnywb.js";const G={class:"welcome"},H={class:"flex flex-wrap items-center gap-4"},J={class:"flex items-center gap-2"},Q={class:"flex items-center gap-2"},W={class:"flex items-center justify-between"},K={class:"mb-6"},L={class:"text-center"},O={class:"text-2xl font-semibold",style:{color:"#67c23a"}},X={class:"mb-6"},Z={class:"text-center"},tt={class:"text-2xl font-semibold",style:{color:"#e6a23c"}},et={class:"mb-4"},st={class:"text-4xl font-semibold",style:{color:"#67c23a"}},at={class:"mb-4"},lt={class:"text-4xl font-semibold",style:{color:"#409eff"}},ot=P({name:"Welcome",__name:"index",setup(M){const d=h({date_from:"",date_to:""}),i=B(!1),l=B(null),c=[{text:"最近7天",value:()=>{const o=new Date,t=new Date;return t.setDate(t.getDate()-7),[t,o]}},{text:"最近30天",value:()=>{const o=new Date,t=new Date;return t.setDate(t.getDate()-30),[t,o]}},{text:"最近3个月",value:()=>{const o=new Date,t=new Date;return t.setMonth(t.getMonth()-3),[t,o]}}],v=()=>E(null,null,function*(){i.value=!0;try{const o=yield A(d);o.success&&(l.value=o.data)}catch(o){j.error("加载统计数据失败")}finally{i.value=!1}}),g=()=>{v()},p=()=>{d.date_from="",d.date_to="",v()},n=o=>`${(o*100).toFixed(2)}%`,m=o=>`${o.toFixed(2)}%`;return I(()=>{v()}),(o,t)=>{const f=r("el-card"),V=r("el-date-picker"),C=r("el-button"),b=r("el-text"),w=r("el-divider"),x=r("el-statistic"),u=r("el-col"),k=r("el-row"),F=r("el-progress"),S=r("el-empty"),z=$("loading");return Y(),R("div",G,[e(f,{class:"mb-4"},{default:a(()=>t[2]||(t[2]=[s("div",{class:"text-center"},[s("h1",{class:"text-3xl font-bold text-gray-800 mb-2"}," 欢迎使用 链接重要性评估系统 "),s("p",{class:"text-gray-500"},"网页链接爬虫系统")],-1)])),_:1,__:[2]}),e(f,{class:"mb-4"},{default:a(()=>[s("div",H,[s("div",J,[t[3]||(t[3]=s("span",{class:"text-sm whitespace-nowrap"},"日期范围",-1)),e(V,{modelValue:d.date_from,"onUpdate:modelValue":t[0]||(t[0]=D=>d.date_from=D),type:"date",placeholder:"开始日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",shortcuts:c,style:{width:"150px"}},null,8,["modelValue"]),t[4]||(t[4]=s("span",{class:"text-sm text-gray-500"},"至",-1)),e(V,{modelValue:d.date_to,"onUpdate:modelValue":t[1]||(t[1]=D=>d.date_to=D),type:"date",placeholder:"结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",shortcuts:c,style:{width:"150px"}},null,8,["modelValue"])]),s("div",Q,[e(C,{type:"primary",onClick:g},{default:a(()=>t[5]||(t[5]=[y("查询",-1)])),_:1,__:[5]}),e(C,{onClick:p},{default:a(()=>t[6]||(t[6]=[y("重置",-1)])),_:1,__:[6]})])])]),_:1}),l.value?T((Y(),N(f,{key:0},{header:a(()=>[s("div",W,[t[7]||(t[7]=s("span",{class:"text-base font-semibold"},"所有网站统计概览",-1)),e(b,{type:"info",size:"small"},{default:a(()=>[y(" 统计周期: "+_(l.value.period.from||"全部")+" ~ "+_(l.value.period.to||"全部"),1)]),_:1})])]),default:a(()=>[s("div",K,[e(w,{"content-position":"left"},{default:a(()=>t[8]||(t[8]=[s("span",{class:"text-base font-semibold"},"任务统计",-1)])),_:1,__:[8]}),e(k,{gutter:20},{default:a(()=>[e(u,{span:6},{default:a(()=>[e(x,{title:"总任务数",value:l.value.summary.total_tasks,"value-style":"color: #409EFF"},null,8,["value"])]),_:1}),e(u,{span:6},{default:a(()=>[e(x,{title:"已完成任务",value:l.value.summary.completed_tasks,"value-style":"color: #67C23A"},null,8,["value"])]),_:1}),e(u,{span:6},{default:a(()=>[e(x,{title:"失败任务",value:l.value.summary.failed_tasks,"value-style":"color: #F56C6C"},null,8,["value"])]),_:1}),e(u,{span:6},{default:a(()=>[s("div",L,[t[9]||(t[9]=s("div",{class:"text-gray-500 text-sm mb-2"},"任务成功率",-1)),s("div",O,_(l.value.summary.total_tasks>0?n(l.value.summary.completed_tasks/l.value.summary.total_tasks):"0%"),1)])]),_:1})]),_:1})]),s("div",X,[e(w,{"content-position":"left"},{default:a(()=>t[10]||(t[10]=[s("span",{class:"text-base font-semibold"},"链接统计",-1)])),_:1,__:[10]}),e(k,{gutter:20},{default:a(()=>[e(u,{span:8},{default:a(()=>[e(x,{title:"总爬取链接数",value:l.value.summary.total_links_crawled,"value-style":"color: #409EFF"},null,8,["value"])]),_:1}),e(u,{span:8},{default:a(()=>[e(x,{title:"新增链接数",value:l.value.summary.new_links_found,"value-style":"color: #E6A23C"},null,8,["value"])]),_:1}),e(u,{span:8},{default:a(()=>[s("div",Z,[t[11]||(t[11]=s("div",{class:"text-gray-500 text-sm mb-2"},"平均新增率",-1)),s("div",tt,_(l.value.summary.total_links_crawled>0?n(l.value.summary.new_links_found/l.value.summary.total_links_crawled):"0%"),1)])]),_:1})]),_:1})]),s("div",null,[e(w,{"content-position":"left"},{default:a(()=>t[12]||(t[12]=[s("span",{class:"text-base font-semibold"},"质量统计",-1)])),_:1,__:[12]}),e(k,{gutter:20},{default:a(()=>[e(u,{span:12},{default:a(()=>[e(f,{shadow:"never",class:"text-center"},{default:a(()=>[s("div",et,[t[13]||(t[13]=s("div",{class:"text-gray-500 text-sm mb-2"},"平均有效率",-1)),s("div",st,_(n(l.value.summary.avg_valid_rate)),1)]),e(F,{percentage:l.value.summary.avg_valid_rate*100,"stroke-width":20,format:m,class:"mt-4"},null,8,["percentage"]),e(b,{type:"info",size:"small",class:"mt-2"},{default:a(()=>t[14]||(t[14]=[y(" 重要链接占总连接的比例 ",-1)])),_:1,__:[14]})]),_:1})]),_:1}),e(u,{span:12},{default:a(()=>[e(f,{shadow:"never",class:"text-center"},{default:a(()=>[s("div",at,[t[15]||(t[15]=s("div",{class:"text-gray-500 text-sm mb-2"},"平均精准率",-1)),s("div",lt,_(n(l.value.summary.avg_precision_rate)),1)]),e(F,{percentage:l.value.summary.avg_precision_rate*100,"stroke-width":20,format:m,color:"#409EFF",class:"mt-4"},null,8,["percentage"]),e(b,{type:"info",size:"small",class:"mt-2"},{default:a(()=>t[16]||(t[16]=[y(" 重要链接识别准确率 ",-1)])),_:1,__:[16]})]),_:1})]),_:1})]),_:1})])]),_:1})),[[z,i.value]]):i.value?U("",!0):(Y(),N(S,{key:1,description:"暂无统计数据"}))])}}}),it=q(ot,[["__scopeId","data-v-19eb36ba"]]);export{it as default};
